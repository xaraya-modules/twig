<script src="{{ xar_fileurl('codemirrorui/lib/CodeMirror-2.0/lib/codemirror.js','property','codemirror') }}" type="text/javascript"/>
    <link rel="stylesheet" href="{{ xar_fileurl('codemirrorui/lib/CodeMirror-2.0/lib/codemirror.css','property','codemirror') }}"/>
    <script src="{{ xar_fileurl('codemirrorui/lib/CodeMirror-2.0/mode/javascript/javascript.js','property','codemirror') }}"/>
    <link rel="stylesheet" href="{{ xar_fileurl('codemirrorui/lib/CodeMirror-2.0/mode/javascript/javascript.css','property','codemirror') }}"/>
    
    <script src="{{ xar_fileurl('codemirrorui/js/codemirror-ui.js','property','codemirror') }}" type="text/javascript"/>
    <link rel="stylesheet" href="{{ xar_fileurl('codemirrorui/css/codemirror-ui.css','property','codemirror') }}" type="text/css" media="screen" />


    {% if not style %}
        {% set style = '' %}
    {% endif %}
    {% if not class %}
        {% set class = '' %}
    {% endif %}
    {% if not rows %}
        {% set rows = 0 %}
    {% endif %}
    {% if not cols %}
        {% set cols = 0 %}
    {% endif %}
    <div style="clear:both; border: 1px dotted black; padding: 3px; background-color: ##F8F8F8">
        {{ xar_data_input({type: "textarea", id: name, name: name, style: style, rows: rows, cols: cols, value: value}) }}
    </div>

    {% set path = dirname(xar_fileurl('codemirrorui/js/codemirror-ui.js','property','codemirror')) %}
    <script>
      var textarea = document.getElementById('{{ name }}');
      var editor = new CodeMirrorUI(textarea,
       {
        path : '{{ path }}/',
          searchMode : 'inline',
          buttons : ['undo','redo','jump','reindent','about']
       },
       {
        mode: "javascript"
      });
    </script>
